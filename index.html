<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ch∆∞∆°ng 5 ‚Äì Gh√©p Li√™n Minh (6‚Äì8 th·∫ª, c√≥ ƒë√°nh s·ªë + d·∫´n ch·ª©ng)</title>
<style>
  :root{
    --bg:#020617; --panel:#0b1220; --border:#1f2937; --text:#e5e7eb; --muted:#94a3b8;
    --green:#22c55e; --blue:#3b82f6; --amber:#f59e0b;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}

  header{position:sticky;top:0;z-index:10;display:flex;gap:10px;align-items:center;flex-wrap:wrap;
    padding:12px 16px;border-bottom:1px solid var(--border);background:rgba(2,6,23,.85);backdrop-filter:blur(6px)}
  h1{font-size:16px;margin:0;font-weight:800}
  .ctrl{display:flex;gap:8px;align-items:center;margin-left:auto;flex-wrap:wrap}
  select,button{background:var(--panel);border:1px solid var(--border);color:var(--text);border-radius:10px;padding:8px 10px;font-weight:700}
  button.primary{background:linear-gradient(180deg,#2563eb,#1d4ed8);border-color:#1e40af}
  button.warn{background:linear-gradient(180deg,#f59e0b,#b45309);border-color:#92400e}
  button:disabled{opacity:.55;cursor:not-allowed}
  .timer{font-size:22px;font-weight:900;border:1px solid var(--border);background:var(--panel);border-radius:10px;padding:6px 10px;min-width:90px;text-align:center}

  main{max-width:1100px;margin:0 auto;padding:16px 16px 96px}

  /* V√πng m·ª•c ti√™u ‚Äì n·ªïi b·∫≠t ·ªü gi·ªØa */
  .goal{display:grid;place-items:center;border:1px solid var(--border);border-radius:18px;padding:18px;margin-bottom:14px;
    background:radial-gradient(80% 120% at 50% -10%,rgba(59,130,246,.18),transparent 60%),
               linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));}
  .goal h2{margin:6px 0 4px 0;font-size:22px;text-align:center}
  .goal small{color:var(--muted);text-align:center}
  .goal .meta{display:flex;gap:12px;align-items:center;justify-content:center;margin-top:6px;color:var(--muted)}

  /* L∆∞·ªõi th·∫ª */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));gap:12px;margin-top:16px}
  .card{position:relative;border:1px solid var(--border);border-radius:16px;padding:18px 16px;min-height:74px;background:linear-gradient(180deg,#0e1628,#0a1220);
    display:flex;align-items:center;justify-content:center;text-align:center;font-weight:800;user-select:none}
  .card .badge{position:absolute;left:10px;top:10px;border:1px solid var(--border);background:#0a1220;border-radius:999px;min-width:28px;min-height:28px;
    display:grid;place-items:center;font-weight:900}
  .card.reveal.correct{outline:2px solid var(--green);box-shadow:0 0 0 3px rgba(34,197,94,.28) inset}
  .card.reveal.incorrect{opacity:.5;filter:grayscale(40%)}

  .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px;color:var(--muted);font-size:13px}

  /* B·∫£ng ƒëi·ªÉm */
  .score{margin-top:18px;border:1px solid var(--border);border-radius:16px;padding:12px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01))}
  .teams{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
  .team{border:1px solid var(--border);border-radius:14px;padding:10px;background:var(--panel)}
  .team input{width:100%;background:var(--panel);border:1px solid #223;color:var(--text);padding:8px;border-radius:10px;font-weight:800;text-align:center;margin-bottom:8px}
  .team .pt{display:flex;align-items:center;justify-content:center;gap:8px}
  .team .pt .v{font-size:22px;font-weight:900;min-width:30px;text-align:center}

  /* Panel d·∫´n ch·ª©ng */
  .evidence{margin-top:16px;border:1px solid var(--border);border-radius:16px;padding:14px;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01))}
  .evidence h3{margin:0 0 8px 0;font-size:16px}
  .evidence ol{margin:0;padding:0 0 0 18px}
  .evidence li{margin:8px 0}
  .evidence small{color:var(--muted)}
  .evidence a{color:#93c5fd;text-decoration:none}
  .evidence a:hover{text-decoration:underline}

  /* Nh√£n nh·ªè */
  label.small{font-size:12px;color:var(--muted);font-weight:600}
</style>
</head>
<body>
<header>
  <h1> Game ‚ÄúGh√©p Li√™n Minh‚Äù </h1>
  <div class="ctrl">
    <label for="sel" class="small">Th·ªùi gian:</label>
    <select id="sel">
      <option value="15">15s</option>
      <option value="20" selected>20s</option>
      <option value="35">35s</option>
      <option value="60">60s</option>
    </select>
    <label for="visible" class="small">S·ªë th·∫ª/v√≤ng:</label>
    <select id="visible">
      <option value="6" selected>6</option>
      <option value="7">7</option>
      <option value="8">8</option>
    </select>
    <div id="timer" class="timer">00:30</div>
    <button id="start" class="primary">B·∫Øt ƒë·∫ßu v√≤ng</button>
    <button id="reveal" class="warn" disabled>Hi·ªán ƒë√°p √°n</button>
    <button id="next">V√≤ng ti·∫øp</button>
  </div>
</header>

<main>
  <!-- M·ª•c ti√™u ·ªü gi·ªØa -->
  <section class="goal">
    <div style="text-align:center">
      <div class="meta">V√≤ng <b id="roundNo">1</b>/<span id="roundTotal">0</span> ‚Ä¢ ƒê√∫ng: <b id="limit">0</b> th·∫ª</div>
      <h2 id="goal">M·ª•c ti√™u s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y</h2>
      <small id="rule">Ch·ªâ c√≥ 0 th·∫ª ƒë√∫ng. C√°c ƒë·ªôi ghi ra gi·∫•y, h·∫øt gi·ªù c√πng gi∆° ƒë√°p √°n.</small>
    </div>
  </section>

  <!-- L∆∞·ªõi th·∫ª c√≥ ƒë√°nh s·ªë 1..N ƒë·∫∑t ·ªü d∆∞·ªõi m·ª•c ti√™u -->
  <section id="grid" class="grid"></section>

  <div class="row">
    <button id="reshuffle">ƒê·ªïi v·ªã tr√≠/th·∫ª nhi·ªÖu</button>
    <span>‚Ä¢ M·ªói v√≤ng: ƒë√°p √°n ƒë√∫ng c·ªë ƒë·ªãnh; c√°c th·∫ª c√≤n l·∫°i ch·ªçn ng·∫´u nhi√™n t·ª´ 12 th·∫ª g·ªëc. ‚Ä¢ Th·∫ª s·∫Ω ƒë√°nh s·ªë t·ª´ 1 ‚Üí N.</span>
  </div>

  <!-- Panel d·∫´n ch·ª©ng t·ª± m·ªü khi b·∫•m "Hi·ªán ƒë√°p √°n" -->
  <section id="evidence" class="evidence" hidden>
    <h3>D·∫´n ch·ª©ng cho ƒë√°p √°n</h3>
    <ol id="ev-list"></ol>
  </section>

  <section class="score">
    <div class="row">Sau khi hi·ªán ƒë√°p √°n, c·ªông ƒëi·ªÉm cho ƒë·ªôi tr·∫£ l·ªùi ƒë√∫ng.</div>
    <div class="teams" id="teams"></div>
  </section>
</main>

<script>
// 12 th·∫ª c·ªë ƒë·ªãnh
const FIXED_CARDS = [
  "C√¥ng nh√¢n","N√¥ng d√¢n","Tr√≠ th·ª©c","Doanh nh√¢n","Thanh ni√™n","Ph·ª• n·ªØ",
  "D√¢n t·ªôc thi·ªÉu s·ªë","L·ª±c l∆∞·ª£ng v≈© trang","Gi√°o vi√™n","B√°c sƒ©","C√¥ng ch·ª©c","Ngh·ªá sƒ©"
];

/*\
 * ROUNDS: th√™m "sources" cho t·ª´ng ƒë√°p √°n ƒë√∫ng.
 * C√≥ th·ªÉ l√† chu·ªói ho·∫∑c m·∫£ng chu·ªói. N·∫øu chu·ªói b·∫Øt ƒë·∫ßu b·∫±ng "http", UI s·∫Ω t·ª± t·∫°o link.
 * üëâ B·∫°n ch·ªâ c·∫ßn thay n·ªôi dung trong m·∫£ng/chu·ªói b·∫±ng ngu·ªìn th·∫≠t c·ªßa b·∫°n.
 */
const ROUNDS = [
  { goal: "Ph√°t tri·ªÉn c√¥ng nghi·ªáp c√¥ng ngh·ªá cao",
    correct: ["C√¥ng nh√¢n","Tr√≠ th·ª©c","Doanh nh√¢n","Thanh ni√™n"], limit: 4,
    sources: {
      "C√¥ng nh√¢n": ["( vai tr√≤ c√¥ng nh√¢n trong CN ho√° ‚Äì HƒêH)"],
      "Tr√≠ th·ª©c": ["( kinh t·∫ø tri th·ª©c/ƒë·ªïi m·ªõi s√°ng t·∫°o ƒë√≥ng g√≥p c·ªßa tr√≠ th·ª©c)"],
      "Doanh nh√¢n": ["( doanh nghi·ªáp c√¥ng ngh·ªá cao/ƒë·ªïi m·ªõi s√°ng t·∫°o)"],
      "Thanh ni√™n": ["( l·ª±c l∆∞·ª£ng tr·∫ª, kh·ªüi nghi·ªáp, STEM)"]
    }
  },
  { goal: "X√¢y d·ª±ng n√¥ng th√¥n m·ªõi",
    correct: ["N√¥ng d√¢n","Tr√≠ th·ª©c","C√¥ng nh√¢n","Thanh ni√™n"], limit: 4,
    sources: {
      "N√¥ng d√¢n": ["(vai tr√≤ n√¥ng d√¢n trong n√¥ng th√¥n m·ªõi)"],
      "Tr√≠ th·ª©c": ["( chuy·ªÉn giao KHKT/khuy·∫øn n√¥ng)"],
      "C√¥ng nh√¢n": ["( ch·∫ø bi·∫øn n√¥ng s·∫£n, h·∫° t·∫ßng CN ph·ª• tr·ª£)"],
      "Thanh ni√™n": ["( thanh ni√™n t√¨nh nguy·ªán/x√¢y d·ª±ng c·ªông ƒë·ªìng)"]
    }
  },
  { goal: "B·∫£o v·ªá T·ªï qu·ªëc v√† ·ªïn ƒë·ªãnh x√£ h·ªôi",
    correct: ["L·ª±c l∆∞·ª£ng v≈© trang","C√¥ng nh√¢n","N√¥ng d√¢n","Thanh ni√™n"], limit: 4,
    sources: {
      "L·ª±c l∆∞·ª£ng v≈© trang": ["( qu·ªëc ph√≤ng to√†n d√¢n)"],
      "C√¥ng nh√¢n": ["( an ninh kinh t·∫ø, ƒë·∫£m b·∫£o chu·ªói cung ·ª©ng chi·∫øn l∆∞·ª£c)"],
      "N√¥ng d√¢n": ["(N th·∫ø tr·∫≠n l√≤ng d√¢n/khu v·ª±c n√¥ng th√¥n)"],
      "Thanh ni√™n": ["( nghƒ©a v·ª•, l·ª±c l∆∞·ª£ng d·ª± b·ªã)"],
    }
  },
  { goal: "H·ªôi nh·∫≠p qu·ªëc t·∫ø, n√¢ng cao nƒÉng l·ª±c c·∫°nh tranh",
    correct: ["Doanh nh√¢n","Tr√≠ th·ª©c","C√¥ng ch·ª©c","Thanh ni√™n"], limit: 4,
    sources: {
      "Doanh nh√¢n": ["( xu·∫•t kh·∫©u, FDI, ƒë·ªïi m·ªõi m√¥ h√¨nh qu·∫£n tr·ªã)"] ,
      "Tr√≠ th·ª©c": ["( R&D, ti√™u chu·∫©n qu·ªëc t·∫ø)"] ,
      "C√¥ng ch·ª©c": ["(c·∫£i c√°ch th·ªÉ ch·∫ø, m√¥i tr∆∞·ªùng kinh doanh)"] ,
      "Thanh ni√™n": ["(l·ª±c l∆∞·ª£ng tr·∫ª, kh·ªüi nghi·ªáp, STEM)"] ,
    }
  },
  { goal: "Ph√°t tri·ªÉn kinh t·∫ø tri th·ª©c, kinh t·∫ø s·ªë",
    correct: ["Tr√≠ th·ª©c","C√¥ng nh√¢n"], limit: 2,
    sources: {
      "Tr√≠ th·ª©c": ["( chuy·ªÉn giao c√¥ng ngh·ªá, AI/ d·ªØ li·ªáu)"] ,
      "C√¥ng nh√¢n": ["( k·ªπ nƒÉng s·ªë, t·ª± ƒë·ªông ho√° trong s·∫£n xu·∫•t)"] ,
    }
  },
  { goal: "Gi·∫£m b·∫•t b√¨nh ƒë·∫≥ng, c·ªßng c·ªë kh·ªëi ƒë·∫°i ƒëo√†n k·∫øt",
    correct: ["Tr√≠ th·ª©c","C√¥ng nh√¢n","Ph·ª• n·ªØ","D√¢n t·ªôc thi·ªÉu s·ªë"], limit: 4,
    sources: {
      "Tr√≠ th·ª©c": ["(t∆∞ v·∫•n ch√≠nh s√°ch x√£ h·ªôi)"] ,
      "C√¥ng nh√¢n": ["( an sinh cho lao ƒë·ªông/nh√† ·ªü c√¥ng nh√¢n)"] ,
      "Ph·ª• n·ªØ": ["( b√¨nh ƒë·∫≥ng gi·ªõi, chƒÉm s√≥c SKSS)"] ,
      "D√¢n t·ªôc thi·ªÉu s·ªë": ["(ch√≠nh s√°ch d√¢n t·ªôc/gi·∫£m ngh√®o b·ªÅn v·ªØng)"] ,
    }
  },
  { goal: "N√¢ng cao ch·∫•t l∆∞·ª£ng y t·∫ø c·ªông ƒë·ªìng",
    correct: ["B√°c sƒ©","C√¥ng ch·ª©c"], limit: 2,
    sources: {
      "B√°c sƒ©": ["( h·ªá th·ªëng y t·∫ø c∆° s·ªü, ti√™m ch·ªßng)"] ,
      "C√¥ng ch·ª©c": ["( qu·∫£n l√Ω y t·∫ø, BHYT)"] ,
    }
  },
  { goal: "ƒê·ªïi m·ªõi gi√°o d·ª•c v√† ph√°t tri·ªÉn khoa h·ªçc",
    correct: ["Gi√°o vi√™n","Tr√≠ th·ª©c"], limit: 2,
    sources: {
      "Gi√°o vi√™n": ["( ch∆∞∆°ng tr√¨nh GDPT, chuy·ªÉn ƒë·ªïi s·ªë gi√°o d·ª•c)"] ,
      "Tr√≠ th·ª©c": ["( nghi√™n c·ª©u khoa h·ªçc, ƒë·∫°i h·ªçc)"] ,
    }
  },
  { goal: "Ph√°t tri·ªÉn vƒÉn h√≥a v√† b·∫£n s·∫Øc d√¢n t·ªôc",
    correct: ["Ngh·ªá sƒ©","D√¢n t·ªôc thi·ªÉu s·ªë"], limit: 2,
    sources: {
      "Ngh·ªá sƒ©": ["( ph√°t tri·ªÉn c√¥ng nghi·ªáp vƒÉn ho√°)"] ,
      "D√¢n t·ªôc thi·ªÉu s·ªë": ["( b·∫£o t·ªìn di s·∫£n, ƒëa d·∫°ng vƒÉn ho√°)"] ,
    }
  },
  { goal: "Ph√°t tri·ªÉn doanh nghi·ªáp ƒë·ªïi m·ªõi s√°ng t·∫°o",
    correct: ["Doanh nh√¢n","Tr√≠ th·ª©c","C√¥ng nh√¢n","C√¥ng ch·ª©c"], limit: 4,
    sources: {
      "Doanh nh√¢n": ["(h·ªá sinh th√°i kh·ªüi nghi·ªáp, qu·ªπ ƒë·∫ßu t∆∞)"] ,
      "Tr√≠ th·ª©c": ["( s·ªü h·ªØu tr√≠ tu·ªá, ph√≤ng th√≠ nghi·ªám)"] ,
      "C√¥ng nh√¢n": ["( nƒÉng su·∫•t lao ƒë·ªông, k·ªπ nƒÉng)"] ,
      "C√¥ng ch·ª©c": ["(ch√≠nh s√°ch h·ªó tr·ª£ DN ƒë·ªïi m·ªõi)"] ,
    }
  }
];

// State
let roundIdx = 0;
let secs = 30;
let t = null;
let randSeed = 0;

// Elements
const sel = document.getElementById('sel');
const visibleSel = document.getElementById('visible');
const timerEl = document.getElementById('timer');
const startBtn = document.getElementById('start');
const revealBtn = document.getElementById('reveal');
const nextBtn = document.getElementById('next');
const reshuffleBtn = document.getElementById('reshuffle');
const goalEl = document.getElementById('goal');
const ruleEl = document.getElementById('rule');
const limitEl = document.getElementById('limit');
const grid = document.getElementById('grid');
const roundNo = document.getElementById('roundNo');
const roundTotal = document.getElementById('roundTotal');
const evidenceEl = document.getElementById('evidence');
const evList = document.getElementById('ev-list');
roundTotal.textContent = ROUNDS.length.toString();

function fmt(s){const m=Math.floor(s/60);const ss=s%60;return String(m).padStart(2,'0')+':'+String(ss).padStart(2,'0');}
function stopTimer(){ if(t) { clearTimeout(t); t=null; } }
function tick(){ if(secs<=0){ stopTimer(); revealBtn.disabled=false; return;} secs--; timerEl.textContent=fmt(secs); t=setTimeout(tick,1000);} 
function startTimer(){ stopTimer(); secs=parseInt(sel.value,10)||30; timerEl.textContent=fmt(secs); revealBtn.disabled=true; tick(); }

function rng(max){ return Math.floor((Math.random()*100000 + randSeed) % max); }
function shuffle(arr){ const a=arr.slice(); for(let i=a.length-1;i>0;i--){ const j=rng(i+1); [a[i],a[j]]=[a[j],a[i]]; } return a; }

// t·∫°o N th·∫ª (N = 6..8): lu√¥n ch·ª©a to√†n b·ªô ƒë√°p √°n ƒë√∫ng + th·∫ª nhi·ªÖu cho ƒë·ªß N, r·ªìi x√°o th·ª© t·ª±
function buildCards(){
  const round = ROUNDS[roundIdx];
  const N = parseInt(visibleSel.value,10); // 6..8
  const correctSet = new Set(round.correct);

  // Pool th·∫ª nhi·ªÖu c√≥ th·ªÉ ch·ªçn (lo·∫°i b·ªè c√°c th·∫ª ƒë√∫ng c·ªßa v√≤ng)
  const pool = FIXED_CARDS.filter(c=>!correctSet.has(c));
  const need = Math.max(0, N - round.correct.length);
  const distractors = shuffle(pool).slice(0, need);
  const merged = shuffle([...round.correct, ...distractors]).slice(0, N);

  grid.innerHTML='';
  merged.forEach((label, idx)=>{
    const d=document.createElement('div');
    d.className='card';
    d.dataset.label = label; // l∆∞u nh√£n g·ªëc ƒë·ªÉ so kh·ªõp
    d.innerHTML = `<div class="badge">${idx+1}</div><div class="lab">${label}</div>`;
    grid.appendChild(d);
  });
}

function renderRound(){
  const round = ROUNDS[roundIdx];
  roundNo.textContent = (roundIdx+1).toString();
  goalEl.textContent = round.goal;
  limitEl.textContent = round.limit.toString();
  ruleEl.innerHTML = `Ch·ªâ c√≥ <b>${round.limit}</b> th·∫ª ƒë√∫ng. C√°c ƒë·ªôi ghi ra gi·∫•y, h·∫øt gi·ªù c√πng gi∆° ƒë√°p √°n.`;
  revealBtn.disabled = true; stopTimer(); timerEl.textContent = fmt(parseInt(sel.value,10)||30);
  evidenceEl.hidden = true; evList.innerHTML = '';
  buildCards();
}

function normalizeSources(src){
  if(!src) return [];
  if(Array.isArray(src)) return src;
  return [src];
}
function linkify(text){
  if(/^https?:\/\//i.test(text)){
    const url = text;
    return `<a href="${url}" target="_blank" rel="noopener">${url}</a>`;
  }
  return text;
}

function buildEvidence(){
  const round = ROUNDS[roundIdx];
  const cards = Array.from(grid.children);
  // L·∫≠p danh s√°ch ƒë√∫ng v√† g·∫Øn s·ªë th·∫ª hi·ªán t·∫°i
  const items = round.correct.map(lbl=>{
    const idx = cards.findIndex(c=>c.dataset.label===lbl);
    const num = idx>=0? idx+1 : null;
    const srcs = normalizeSources(round.sources && round.sources[lbl]);
    return {label: lbl, idx, num, srcs};
  }).sort((a,b)=> (a.idx - b.idx));

  evList.innerHTML = '';
  items.forEach(it=>{
    const li = document.createElement('li');
    const n = (it.num!=null? it.num+') ' : '');
    const srcHtml = it.srcs.length ? it.srcs.map(s=>'‚Ä¢ '+linkify(s)).join('<br>') : '<em>Ch∆∞a th√™m ngu·ªìn</em>';
    li.innerHTML = `<b>${n}${it.label}</b><br><small>${srcHtml}</small>`;
    evList.appendChild(li);
  });

  evidenceEl.hidden = false;
}

function reveal(){
  const round = ROUNDS[roundIdx];
  const correct = new Set(round.correct);
  Array.from(grid.children).forEach(card=>{
    const el = card; const label = el.dataset.label;
    el.classList.add('reveal', correct.has(label) ? 'correct' : 'incorrect');
  });
  buildEvidence(); // t·ª± m·ªü panel d·∫´n ch·ª©ng
}

startBtn.addEventListener('click', ()=>{ randSeed++; startTimer(); buildCards(); evidenceEl.hidden=true; });
revealBtn.addEventListener('click', ()=>{ stopTimer(); reveal(); });
nextBtn.addEventListener('click', ()=>{ roundIdx=(roundIdx+1)%ROUNDS.length; renderRound(); });
reshuffleBtn.addEventListener('click', ()=>{ randSeed++; buildCards(); evidenceEl.hidden=true; });
visibleSel.addEventListener('change', ()=>{ buildCards(); evidenceEl.hidden=true; });

// init
renderRound();

// b·∫£ng ƒëi·ªÉm 2 ƒë·ªôi (gi·ªØ nguy√™n, c√≥ th·ªÉ ƒë·ªïi s·ªë ƒë·ªôi n·∫øu c·∫ßn)
(function makeTeams(){
  const wrap = document.getElementById('teams');
  for(let i=0;i<2;i++){
    const box=document.createElement('div');
    box.className='team';
    box.innerHTML=`
      <input value="ƒê·ªôi ${i+1}" />
      <div class="pt">
        <button data-act="dec" data-i="${i}">‚àí</button>
        <div class="v" id="sc-${i}">0</div>
        <button data-act="inc" data-i="${i}">Ôºã</button>
      </div>`;
    wrap.appendChild(box);
  }
  wrap.addEventListener('click',(e)=>{
    const btn=e.target; if(!(btn instanceof HTMLElement) || btn.tagName!=='BUTTON') return;
    const i=parseInt(btn.getAttribute('data-i'),10); const act=btn.getAttribute('data-act');
    const numEl=document.getElementById('sc-'+i); const val=parseInt(numEl.textContent||'0',10);
    numEl.textContent=String(Math.max(0, val + (act==='inc'?1:-1)));
  });
})();
</script>
</body>
</html>
